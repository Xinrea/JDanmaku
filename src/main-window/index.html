<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="../common/common.css" />
    <link rel="stylesheet" href="main-window.css" />
    <title>danmu</title>
  </head>

  <body x-data="appStatus">
    <div id="app" :style="`--global-opacity: ${base.opacity}`">
      <div
        id="title-bar"
        :style="{backgroundColor: base.live ? 'rgba(237,59,107,1)' : 'var(--title-bar-color)'}"
      >
        <div>
          <div id="live-text">LIVE</div>
          <div>
            <span
              class="icon"
              style="
                margin-left: 14px;
                -webkit-mask-image: url('../assets/icons/avatar.svg');
                background-color: white;
              "
            ></span>
            <div id="online" x-text="base.live?base.online:''"></div>
          </div>
        </div>
        <div x-data="toggles">
          <div
            id="medal-button"
            class="title-button tooltip"
            :class="values['medal-display'] && 'enabled'"
            @click="toggle('medal-display')"
          >
            <span class="tooltip-text" x-text="l.texts.FANS_MEDAL"></span>
            <span
              class="icon"
              style="-webkit-mask-image: url('../assets/icons/medal.svg')"
            ></span>
          </div>
          <div
            id="enter-button"
            class="title-button tooltip"
            :class="values['enter-message'] && 'enabled'"
            @click="toggle('enter-message')"
          >
            <span class="tooltip-text" x-text="l.texts.ENTER_INFO"></span>
            <span
              class="icon"
              style="-webkit-mask-image: url('../assets/icons/enter.svg')"
            ></span>
          </div>
          <div
            id="top-button"
            class="title-button tooltip"
            :class="values['always-on-top'] && 'enabled'"
            @click="toggle('always-on-top')"
          >
            <span class="tooltip-text" x-text="l.texts.PINNED"></span>
            <span
              class="icon"
              style="-webkit-mask-image: url('../assets/icons/pin.svg')"
            ></span>
          </div>
          <div
            id="minimize-button"
            class="title-button tooltip enabled"
            x-show="!values['always-on-top']"
            x-transition.duration.300ms
            @click="minimize"
          >
            <span
              class="icon"
              style="-webkit-mask-image: url('../assets/icons/minimize.svg')"
            ></span>
          </div>
          <div id="dropdown" x-data="menu">
            <div
              id="cover"
              x-show="open"
              @click="click"
              x-transition.duration.300ms
              style="z-index: 99; position: fixed; left: 0; right: 0"
            ></div>
            <div
              id="menu-button"
              class="title-button enabled"
              @click="open = !open"
              style="z-index: 100"
            >
              <span
                class="icon"
                style="-webkit-mask-image: url('../assets/icons/setting.svg')"
              ></span>
            </div>
            <div
              id="dropdown-content"
              x-show="open"
              x-transition.opacity
              x-transition.scale.10.origin.top.right.duration.300ms
              style="z-index: 100"
            >
              <a
                id="gift-window"
                href="#"
                @click="click"
                x-text="l.texts.GIFT_WINDOW"
              ></a>
              <a
                id="superchat-window"
                href="#"
                @click="click"
                x-text="l.texts.SUPERCHAT_WINDOW"
              ></a>
              <a
                id="export-gift"
                href="#"
                @click="click"
                x-text="l.texts.EXPORT_GIFT"
              ></a>
              <a
                id="setting-window"
                href="#"
                @click="click"
                x-text="l.texts.SETTING"
              ></a>
              <a id="quit" href="#" @click="click" x-text="l.texts.QUIT"></a>
            </div>
          </div>
        </div>
      </div>
      <div id="danmuSender" x-show="login" style="z-index: 90">
        <span></span>
        <span
          class="input"
          role="textbox"
          @input="handleContentEdit"
          @keyup.enter="sendDanmu"
          contenteditable
        >
        </span>
      </div>
      <div
        id="danmu"
        @wheel="danmuPanel.scrollHandler()"
        :style="`--danmu-size: ${base.fontSize}px;`"
      ></div>
      <div
        id="bottom-indicator"
        @click="danmuPanel.enableAutoScroll()"
        x-show="!danmuPanel.autoScroll && danmuPanel.newDanmuCount>0"
      >
        <span id="danmu-count" x-text="danmuPanel.newDanmuCount">0</span>
        条新弹幕
      </div>
      <div id="statusbar">
        <div id="live-title" x-text="base.title"></div>
        <div
          class="tooltip"
          style="height: 24px; width: 24px; cursor: pointer; margin-right: 14px"
          @click=""
        >
          <span class="tooltip-text" style="top: -5px">开播设置</span>
          <span
            class="icon"
            style="
              -webkit-mask-image: url('../assets/icons/link.svg');
              background-color: var(--font-color);
            "
          ></span>
        </div>
      </div>
    </div>
  </body>
  <script src="main-window.js"></script>
</html>

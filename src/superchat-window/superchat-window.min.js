/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/common/confirmbox.ts":
/*!**********************************!*\
  !*** ./src/common/confirmbox.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.createConfirmBox = void 0;\n// Create a confirm-box with message and callback\nfunction createConfirmBox(message, confirmCallback) {\n    var confirmBox = document.createElement('div');\n    confirmBox.className = 'confirm-box';\n    var confirmBoxContent = document.createElement('div');\n    confirmBoxContent.className = 'confirm-box-content';\n    confirmBoxContent.innerText = message;\n    confirmBox.appendChild(confirmBoxContent);\n    var confirmBoxBtn = document.createElement('div');\n    confirmBoxBtn.className = 'confirm-box-btn';\n    var confirmBoxBtnCancel = document.createElement('button');\n    confirmBoxBtnCancel.className = 'confirm-box-btn-cancel';\n    confirmBoxBtnCancel.innerText = '取消';\n    confirmBoxBtnCancel.onclick = function () {\n        confirmBox.remove();\n    };\n    confirmBoxBtn.appendChild(confirmBoxBtnCancel);\n    var confirmBoxBtnConfirm = document.createElement('button');\n    confirmBoxBtnConfirm.className = 'confirm-box-btn-confirm';\n    confirmBoxBtnConfirm.innerText = '确认';\n    confirmBoxBtnConfirm.onclick = function () {\n        confirmBox.remove();\n        confirmCallback();\n    };\n    confirmBoxBtn.appendChild(confirmBoxBtnConfirm);\n    confirmBox.appendChild(confirmBoxBtn);\n    return confirmBox;\n}\nexports.createConfirmBox = createConfirmBox;\n\n\n//# sourceURL=webpack://jlivertool/./src/common/confirmbox.ts?");

/***/ }),

/***/ "./src/common/content-render.ts":
/*!**************************************!*\
  !*** ./src/common/content-render.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.renderContent = void 0;\n// renderContent renders string to html node\nfunction renderContent(content_string) {\n    // Match string with regex '[bB][vV][0-9a-zA-Z]*'\n    var segments = content_string.split(/([bB][vV][0-9a-zA-Z]+)/);\n    // Create parent node\n    var node = document.createElement('span');\n    node.className = 'content';\n    var _loop_1 = function (segment) {\n        if (segment.length === 0)\n            return \"continue\";\n        if (/([bB][vV][0-9a-zA-Z]+)/.test(segment)) {\n            // This segment is bv link\n            var a = document.createElement('a');\n            a.className = 'bv-link';\n            var url_1 = 'https://www.bilibili.com/video/' + segment;\n            a.addEventListener('click', function () {\n                window.electron.send('openURL', url_1);\n            });\n            a.innerText = segment;\n            node.append(a);\n        }\n        else {\n            // Plain text\n            var p = document.createElement('span');\n            p.innerText = segment;\n            node.append(p);\n        }\n    };\n    // For every segment\n    for (var _i = 0, segments_1 = segments; _i < segments_1.length; _i++) {\n        var segment = segments_1[_i];\n        _loop_1(segment);\n    }\n    return node;\n}\nexports.renderContent = renderContent;\n\n\n//# sourceURL=webpack://jlivertool/./src/common/content-render.ts?");

/***/ }),

/***/ "./src/common/medal.ts":
/*!*****************************!*\
  !*** ./src/common/medal.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.createMedal = void 0;\nfunction createMedal(guardLevel, medalName, medalLevel) {\n    var medal = document.createElement('div');\n    medal.className = 'medal';\n    var medalLabel = document.createElement('div');\n    medalLabel.className = 'medal_label';\n    medalLabel.style.backgroundImage = \"var(--medal-level-\".concat(Math.floor((medalLevel - 1) / 4), \")\");\n    if (guardLevel > 0) {\n        medal.style.borderColor = \"var(--guard-level-border-\".concat(guardLevel, \")\");\n        var medalGuard = document.createElement('div');\n        medalGuard.className = 'medal_guard';\n        medalGuard.style.backgroundImage = \"var(--guard-level-\".concat(guardLevel, \")\");\n        medalLabel.appendChild(medalGuard);\n    }\n    else {\n        medal.style.borderColor = \"var(--medal-level-border-\".concat(Math.floor((medalLevel - 1) / 4), \")\");\n    }\n    var medalNameDiv = document.createElement('div');\n    medalNameDiv.className = 'medal_name';\n    medalNameDiv.innerText = medalName;\n    var medalLevelDiv = document.createElement('div');\n    medalLevelDiv.className = 'medal_level';\n    medalLevelDiv.innerText = String(medalLevel);\n    medalLevelDiv.style.color = \"var(--medal-level-border-\".concat(Math.floor((medalLevel - 1) / 4), \")\");\n    medalLabel.appendChild(medalNameDiv);\n    medal.appendChild(medalLabel);\n    medal.appendChild(medalLevelDiv);\n    return medal;\n}\nexports.createMedal = createMedal;\n\n\n//# sourceURL=webpack://jlivertool/./src/common/medal.ts?");

/***/ }),

/***/ "./src/common/superchat.ts":
/*!*********************************!*\
  !*** ./src/common/superchat.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.createSuperchatEntry = void 0;\nvar medal_1 = __webpack_require__(/*! ./medal */ \"./src/common/medal.ts\");\nvar content_render_1 = __webpack_require__(/*! ./content-render */ \"./src/common/content-render.ts\");\nfunction createSuperchatEntry(id, g, removable) {\n    var level = getSuperChatLevel(g.data.price);\n    var scEntry = document.createElement('div');\n    scEntry.classList.add('sc-entry');\n    var scEntryHeader = document.createElement('div');\n    scEntryHeader.classList.add('sc-entry-header');\n    scEntryHeader.style.border = \"1px solid var(--sc-f-level-\".concat(level, \")\");\n    scEntryHeader.style.backgroundColor = \"var(--sc-b-level-\".concat(level, \")\");\n    var scEntryHeaderLeft = document.createElement('div');\n    scEntryHeaderLeft.classList.add('sc-entry-header-left');\n    var scEntryHeaderLeftAvatar = document.createElement('div');\n    scEntryHeaderLeftAvatar.classList.add('sc-entry-header-left-avatar');\n    var scEntryHeaderLeftAvatarImg = document.createElement('img');\n    scEntryHeaderLeftAvatarImg.classList.add('avatar');\n    scEntryHeaderLeftAvatarImg.src = g.data.user_info.face;\n    scEntryHeaderLeftAvatar.appendChild(scEntryHeaderLeftAvatarImg);\n    if (g.data.user_info.face_frame != '') {\n        var scEntryHeaderLeftAvatarFrameImg = document.createElement('img');\n        scEntryHeaderLeftAvatarFrameImg.classList.add('avatar-frame');\n        scEntryHeaderLeftAvatarFrameImg.src = g.data.user_info.face_frame;\n        scEntryHeaderLeftAvatar.appendChild(scEntryHeaderLeftAvatarFrameImg);\n    }\n    scEntryHeaderLeft.appendChild(scEntryHeaderLeftAvatar);\n    var scEntryHeaderLeftName = document.createElement('div');\n    scEntryHeaderLeftName.classList.add('sc-entry-header-left-name');\n    if (g.data.medal_info) {\n        var scEntryHeaderLeftNameMedal = (0, medal_1.createMedal)(g.data.medal_info.guard_level, g.data.medal_info.medal_name, g.data.medal_info.medal_level);\n        scEntryHeaderLeftName.appendChild(scEntryHeaderLeftNameMedal);\n    }\n    var scEntryHeaderLeftNameSender = document.createElement('div');\n    scEntryHeaderLeftNameSender.classList.add('sender');\n    scEntryHeaderLeftNameSender.innerText = g.data.user_info.uname;\n    scEntryHeaderLeftName.appendChild(scEntryHeaderLeftNameSender);\n    scEntryHeaderLeft.appendChild(scEntryHeaderLeftName);\n    scEntryHeader.appendChild(scEntryHeaderLeft);\n    var scEntryHeaderRight = document.createElement('div');\n    scEntryHeaderRight.classList.add('sc-entry-header-right');\n    scEntryHeaderRight.innerText = '￥' + g.data.price;\n    scEntryHeader.appendChild(scEntryHeaderRight);\n    scEntry.appendChild(scEntryHeader);\n    var scEntryContent = document.createElement('div');\n    scEntryContent.classList.add('sc-entry-content');\n    scEntryContent.style.backgroundColor = \"var(--sc-f-level-\".concat(level, \")\");\n    var scEntryContentText = document.createElement('div');\n    scEntryContentText.classList.add('sc-entry-content-text');\n    scEntryContentText.appendChild((0, content_render_1.renderContent)(g.data.message));\n    scEntryContent.appendChild(scEntryContentText);\n    scEntry.appendChild(scEntryContent);\n    if (removable) {\n        scEntry.ondblclick = function () {\n            scEntry.remove();\n            window.electron.send('remove', {\n                type: 'superchats',\n                id: id\n            });\n        };\n    }\n    return scEntry;\n}\nexports.createSuperchatEntry = createSuperchatEntry;\nfunction getSuperChatLevel(price) {\n    if (price >= 2000) {\n        return 5;\n    }\n    else if (price >= 1000) {\n        return 4;\n    }\n    else if (price >= 500) {\n        return 3;\n    }\n    else if (price >= 100) {\n        return 2;\n    }\n    else if (price >= 50) {\n        return 1;\n    }\n    return 0;\n}\n\n\n//# sourceURL=webpack://jlivertool/./src/common/superchat.ts?");

/***/ }),

/***/ "./src/superchat-window/superchat-window.ts":
/*!**************************************************!*\
  !*** ./src/superchat-window/superchat-window.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar confirmbox_1 = __webpack_require__(/*! ../common/confirmbox */ \"./src/common/confirmbox.ts\");\nvar superchat_1 = __webpack_require__(/*! ../common/superchat */ \"./src/common/superchat.ts\");\nvar $hideButton = document.getElementById('hide-button');\nvar $panel = document.getElementById('panel');\nvar giftMap = new Map();\ndocument.getElementById('clear-button').onclick = function () {\n    document.body.appendChild((0, confirmbox_1.createConfirmBox)('确定清空所有醒目留言记录？', function () {\n        $panel.innerHTML = '';\n        giftMap = new Map();\n        window.electron.send('clear-superchats');\n    }));\n};\n$hideButton.onclick = function () {\n    window.electron.send('hideSuperchatWindow');\n};\nvar autoScroll = true;\nvar lastPosition = 0;\n$panel.addEventListener('scroll', function () {\n    if (Math.ceil($panel.scrollTop) == lastPosition) {\n        // Auto scroll\n        autoScroll = true;\n        return;\n    }\n    // User scroll\n    autoScroll = Math.ceil($panel.scrollTop) ==\n        $panel.scrollHeight - $panel.clientHeight;\n});\nwindow.electron.register('superchat', function (g) {\n    var scEntry = (0, superchat_1.createSuperchatEntry)(g.id, g.msg, true);\n    $panel.appendChild(scEntry);\n    if (autoScroll) {\n        $panel.scrollTop = lastPosition = $panel.scrollHeight - $panel.clientHeight;\n    }\n});\nwindow.electron.register('reset', function () {\n    $panel.innerHTML = '';\n    window.electron.send('reset');\n});\nwindow.electron.register('updateOpacity', function () {\n    document.documentElement.style.setProperty('--global-opacity', window.electron.get('config.opacity', 1));\n});\ndocument.documentElement.style.setProperty('--global-opacity', window.electron.get('config.opacity', 1));\n\n\n//# sourceURL=webpack://jlivertool/./src/superchat-window/superchat-window.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/superchat-window/superchat-window.ts");
/******/ 	
/******/ })()
;